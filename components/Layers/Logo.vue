<template>
    <g class="logo" :transform="`translate(${logo.position.x}, ${logo.position.y})`" fill="transparent" @click="(e)=>handleClick(e)">
        <g>
            <path d="M1 126.728H20.872V182.744C20.872 188.12 21.16 192.2 21.736 194.984C22.408 197.672 23.848 200.648 26.056 203.912C28.264 207.08 29.848 208.664 30.808 208.664C31.768 208.664 33.352 207.08 35.56 203.912C37.768 200.648 39.16 197.672 39.736 194.984C40.408 192.2 40.744 188.12 40.744 182.744V165.896C40.744 157.832 40.168 152.216 39.016 149.048C37.96 145.88 35.656 141.992 32.104 137.384L49.384 125C52.456 127.016 55.096 130.952 57.304 136.808C59.512 142.568 60.616 149.48 60.616 157.544V181.304C60.616 188.792 59.896 194.936 58.456 199.736C57.016 204.536 52.888 210.68 46.072 218.168C39.352 225.56 34.264 229.256 30.808 229.256C27.352 229.256 22.216 225.56 15.4 218.168C8.67999 210.68 4.6 204.536 3.16 199.736C1.72 194.936 1 188.792 1 181.304V126.728Z" stroke="var(--c-two)"/>
            <path d="M123.852 188.504V193.688H89.0042C89.0042 199.448 89.7242 204.008 91.1642 207.368C91.6442 208.52 92.5082 209.72 93.7562 210.968C95.0042 212.12 96.3003 212.696 97.6443 212.696C98.9883 212.696 100.668 211.544 102.684 209.24C104.7 206.936 106.284 204.152 107.436 200.888L122.268 211.4C119.676 216.2 115.692 220.376 110.316 223.928C105.036 227.48 100.764 229.256 97.5002 229.256C94.2362 229.256 89.4842 226.712 83.2442 221.624C77.1002 216.536 73.3562 212.6 72.0122 209.816C70.6682 206.936 69.9962 199.928 69.9962 188.792C69.9962 177.56 70.6682 170.552 72.0122 167.768C73.3562 164.888 77.1002 160.904 83.2442 155.816C89.4842 150.728 94.0442 148.184 96.9242 148.184C99.8042 148.184 104.316 150.728 110.46 155.816C116.7 160.904 120.492 164.888 121.836 167.768C123.18 170.552 123.852 177.464 123.852 188.504ZM103.836 170.504C103.164 169.16 102.06 167.864 100.524 166.616C99.0842 165.368 97.6922 164.744 96.3482 164.744C95.1002 164.744 93.6602 166.04 92.0282 168.632C90.3962 171.128 89.3882 174.92 89.0042 180.008H105.42C105.132 174.92 104.604 171.752 103.836 170.504Z" stroke="var(--c-two)"/>
            <path d="M187.837 188.504V193.688H152.989C152.989 199.448 153.709 204.008 155.149 207.368C155.629 208.52 156.493 209.72 157.741 210.968C158.989 212.12 160.285 212.696 161.629 212.696C162.973 212.696 164.653 211.544 166.669 209.24C168.685 206.936 170.269 204.152 171.421 200.888L186.253 211.4C183.661 216.2 179.677 220.376 174.301 223.928C169.021 227.48 164.749 229.256 161.485 229.256C158.221 229.256 153.469 226.712 147.229 221.624C141.085 216.536 137.341 212.6 135.997 209.816C134.653 206.936 133.981 199.928 133.981 188.792C133.981 177.56 134.653 170.552 135.997 167.768C137.341 164.888 141.085 160.904 147.229 155.816C153.469 150.728 158.029 148.184 160.909 148.184C163.789 148.184 168.301 150.728 174.445 155.816C180.685 160.904 184.477 164.888 185.821 167.768C187.165 170.552 187.837 177.464 187.837 188.504ZM167.821 170.504C167.149 169.16 166.045 167.864 164.509 166.616C163.069 165.368 161.677 164.744 160.333 164.744C159.085 164.744 157.645 166.04 156.013 168.632C154.381 171.128 153.373 174.92 152.989 180.008H169.405C169.117 174.92 168.589 171.752 167.821 170.504Z" stroke="var(--c-two)"/>
            <path d="M222.013 227.528H203.005V177.848C203.005 172.952 202.429 169.16 201.277 166.472C200.125 163.784 198.301 161.432 195.805 159.416L211.645 148.328C215.197 151.208 217.837 154.52 219.565 158.264C226.669 151.544 231.661 148.184 234.541 148.184C237.517 148.184 241.933 150.872 247.789 156.248C253.741 161.528 256.717 166.76 256.717 171.944V199.736C256.717 204.632 257.293 208.424 258.445 211.112C259.597 213.8 261.421 216.152 263.917 218.168L248.077 229.256C241.165 223.784 237.709 216.008 237.709 205.928V173.96C237.709 172.328 236.845 170.648 235.117 168.92C233.389 167.096 231.757 166.184 230.221 166.184C228.781 166.184 226.045 168.2 222.013 172.232V227.528Z" stroke="var(--c-two)"/>
            <path d="M326.259 227.528H307.251V173.96C307.251 172.328 306.387 170.648 304.659 168.92C302.931 167.096 301.443 166.184 300.195 166.184C299.043 166.184 297.123 167.336 294.435 169.64V227.528H275.427V177.848C275.427 172.952 274.851 169.16 273.699 166.472C272.547 163.784 270.723 161.432 268.227 159.416L284.067 148.328C287.235 151.016 289.587 153.752 291.123 156.536C297.363 150.968 301.683 148.184 304.083 148.184C305.523 148.184 307.875 149.24 311.139 151.352C314.403 153.464 317.379 156.008 320.067 158.984C327.651 151.784 332.883 148.184 335.763 148.184C338.739 148.184 343.155 150.872 349.011 156.248C354.963 161.528 357.939 166.76 357.939 171.944V199.736C357.939 204.632 358.515 208.424 359.667 211.112C360.819 213.8 362.643 216.152 365.139 218.168L349.299 229.256C342.387 223.784 338.931 216.008 338.931 205.928V173.96C338.931 172.328 338.067 170.648 336.339 168.92C334.611 167.096 333.171 166.184 332.019 166.184C330.963 166.184 328.947 167.384 325.971 169.784C326.163 170.744 326.259 171.464 326.259 171.944V227.528Z" stroke="var(--c-two)"/>
            <path d="M426.357 149.912V208.952C426.933 212.312 429.189 215.288 433.125 217.88L420.165 228.968C418.917 228.104 417.381 226.568 415.557 224.36C413.733 222.152 412.197 219.896 410.949 217.592C402.981 225.368 397.413 229.256 394.245 229.256C391.941 229.256 388.197 226.712 383.013 221.624C377.925 216.536 374.757 212.408 373.509 209.24C372.261 206.072 371.637 199.256 371.637 188.792C371.637 178.232 372.261 171.368 373.509 168.2C374.757 165.032 377.925 160.904 383.013 155.816C388.197 150.728 391.941 148.184 394.245 148.184C397.605 148.184 403.029 151.64 410.517 158.552L412.245 149.912H426.357ZM406.341 171.944C405.669 170.696 404.277 169.448 402.165 168.2C400.149 166.856 398.613 166.184 397.557 166.184C396.501 166.184 395.349 166.808 394.101 168.056C392.949 169.304 392.181 170.456 391.797 171.512C390.549 173.24 389.925 179 389.925 188.792C389.925 198.488 390.549 204.2 391.797 205.928C392.181 206.888 392.949 208.04 394.101 209.384C395.349 210.632 396.501 211.256 397.557 211.256C398.613 211.256 400.149 210.632 402.165 209.384C404.277 208.04 405.621 206.84 406.197 205.784C406.869 204.728 407.253 199.112 407.349 188.936C407.349 178.76 407.013 173.096 406.341 171.944Z" stroke="var(--c-two)"/>
            <path d="M59.752 68.104C60.808 69.832 61.336 73.288 61.336 78.472C61.336 83.56 60.28 87.88 58.168 91.432C56.248 94.216 52.168 98.104 45.928 103.096C39.688 107.992 35.08 110.44 32.104 110.44C26.824 110.44 20.776 107.704 13.96 102.232C7.144 96.664 2.824 90.568 1 83.944L16.984 73C18.52 77.512 20.968 81.64 24.328 85.384C27.688 89.128 30.04 91 31.384 91C32.824 91 34.312 90.568 35.848 89.704C37.48 88.744 38.728 87.784 39.592 86.824C40.84 85.288 41.464 82.888 41.464 79.624C41.464 76.36 40.696 74.344 39.16 73.576C37.24 71.944 33.496 69.784 27.928 67.096C22.456 64.408 17.368 61.528 12.664 58.456C7.96 55.288 4.936 52.216 3.592 49.24C2.344 46.264 1.72 42.424 1.72 37.72C1.72 32.92 2.776 28.744 4.888 25.192C6.808 22.408 10.888 18.568 17.128 13.672C23.368 8.68 27.976 6.184 30.952 6.184C36.232 6.184 42.28 8.968 49.096 14.536C55.912 20.008 60.232 26.056 62.056 32.68L46.072 43.768C44.536 39.256 42.088 35.128 38.728 31.384C35.368 27.544 32.968 25.624 31.528 25.624C30.184 25.624 28.696 26.056 27.064 26.92C25.432 27.784 24.088 28.888 23.032 30.232C22.072 31.48 21.592 33.688 21.592 36.856C21.592 39.928 22.552 41.992 24.472 43.048C26.008 44.392 29.512 46.504 34.984 49.384C49 57.064 57.256 63.304 59.752 68.104Z" stroke="var(--c-two)"/>
            <path d="M70.6769 31.096H89.6849V80.92C89.6849 85.816 90.2609 89.608 91.4129 92.296C92.5649 94.984 94.3889 97.336 96.8849 99.352L81.0449 110.44C74.1329 104.968 70.6769 97.192 70.6769 87.112V31.096ZM80.4689 1C81.5249 1 83.8769 2.584 87.5249 5.752C91.1729 8.824 92.9969 10.936 92.9969 12.088C92.9969 13.144 91.1249 15.256 87.3809 18.424C83.7329 21.592 81.3809 23.176 80.3249 23.176C79.3649 23.176 77.0609 21.64 73.4129 18.568C69.7649 15.4 67.9409 13.288 67.9409 12.232C67.9409 11.08 69.7649 8.92 73.4129 5.752C77.1569 2.584 79.5089 1 80.4689 1Z" stroke="var(--c-two)"/>
            <path d="M155.015 69.688V74.872H120.167C120.167 80.632 120.887 85.192 122.327 88.552C122.807 89.704 123.671 90.904 124.919 92.152C126.167 93.304 127.463 93.88 128.807 93.88C130.151 93.88 131.831 92.728 133.847 90.424C135.863 88.12 137.447 85.336 138.599 82.072L153.431 92.584C150.839 97.384 146.855 101.56 141.479 105.112C136.199 108.664 131.927 110.44 128.663 110.44C125.399 110.44 120.647 107.896 114.407 102.808C108.263 97.72 104.519 93.784 103.175 91C101.831 88.12 101.159 81.112 101.159 69.976C101.159 58.744 101.831 51.736 103.175 48.952C104.519 46.072 108.263 42.088 114.407 37C120.647 31.912 125.207 29.368 128.087 29.368C130.967 29.368 135.479 31.912 141.623 37C147.863 42.088 151.655 46.072 152.999 48.952C154.343 51.736 155.015 58.648 155.015 69.688ZM134.999 51.688C134.327 50.344 133.223 49.048 131.687 47.8C130.247 46.552 128.855 45.928 127.511 45.928C126.263 45.928 124.823 47.224 123.191 49.816C121.559 52.312 120.551 56.104 120.167 61.192H136.583C136.295 56.104 135.767 52.936 134.999 51.688Z" stroke="var(--c-two)"/>
            <path d="M189.191 46.216V78.04C189.191 82.552 190.727 86.68 193.799 90.424C196.871 94.168 201.095 97.144 206.471 99.352L190.631 110.44C184.871 107.752 180.023 104.056 176.087 99.352C172.151 94.552 170.183 89.512 170.183 84.232V46.216H162.983V35.416L170.183 33.688C169.991 28.984 169.415 25.288 168.455 22.6C167.495 19.816 165.671 17.128 162.983 14.536L178.823 3.448C185.735 8.92 189.191 16.696 189.191 26.776V31.096H205.319V46.216H189.191Z" stroke="var(--c-two)"/>
            <path d="M265.77 85.384C265.77 88.36 262.074 93.304 254.682 100.216C247.29 107.032 241.77 110.44 238.122 110.44C234.57 110.44 230.106 108.664 224.73 105.112C219.45 101.56 215.514 97.384 212.922 92.584L227.754 82.36C232.554 89.08 236.058 92.44 238.266 92.44C239.898 92.44 241.914 91.624 244.314 89.992C246.714 88.36 247.914 86.824 247.914 85.384C247.914 85 246.762 84.184 244.458 82.936C242.154 81.592 239.322 79.96 235.962 78.04C232.698 76.024 229.434 73.816 226.17 71.416C222.906 68.92 220.122 65.896 217.818 62.344C215.514 58.792 214.362 55.192 214.362 51.544C214.362 47.896 217.626 43.288 224.154 37.72C230.682 32.152 235.674 29.368 239.13 29.368C242.682 29.368 247.098 31.144 252.378 34.696C257.754 38.248 261.738 42.424 264.33 47.224L249.498 57.448C244.698 50.728 241.194 47.368 238.986 47.368C237.834 47.368 236.394 48.04 234.666 49.384C233.034 50.632 232.218 51.784 232.218 52.84C232.218 53.896 233.946 55.528 237.402 57.736C240.954 59.944 244.794 62.248 248.922 64.648C253.146 66.952 256.986 70.024 260.442 73.864C263.994 77.608 265.77 81.448 265.77 85.384Z" stroke="var(--c-two)"/>
            <path d="M326.858 69.688V74.872H292.01C292.01 80.632 292.731 85.192 294.171 88.552C294.651 89.704 295.514 90.904 296.762 92.152C298.01 93.304 299.307 93.88 300.651 93.88C301.995 93.88 303.674 92.728 305.69 90.424C307.706 88.12 309.291 85.336 310.443 82.072L325.275 92.584C322.683 97.384 318.699 101.56 313.323 105.112C308.043 108.664 303.771 110.44 300.507 110.44C297.242 110.44 292.49 107.896 286.25 102.808C280.106 97.72 276.362 93.784 275.018 91C273.674 88.12 273.003 81.112 273.003 69.976C273.003 58.744 273.674 51.736 275.018 48.952C276.362 46.072 280.106 42.088 286.25 37C292.49 31.912 297.05 29.368 299.93 29.368C302.81 29.368 307.322 31.912 313.466 37C319.706 42.088 323.498 46.072 324.842 48.952C326.186 51.736 326.858 58.648 326.858 69.688ZM306.842 51.688C306.17 50.344 305.066 49.048 303.53 47.8C302.09 46.552 300.698 45.928 299.354 45.928C298.106 45.928 296.666 47.224 295.034 49.816C293.402 52.312 292.394 56.104 292.01 61.192H308.427C308.139 56.104 307.61 52.936 306.842 51.688Z" stroke="var(--c-two)"/>
        </g>
            <path :d="`M464.096 227.528H445.088V177.848C445.088 172.952 444.512 169.16 443.36 166.472C442.208 163.784 440.384 161.432 437.888 159.416L453.728 148.328C457.28 151.208 459.92 154.52 461.648 158.264C468.752 151.544 473.744 148.184 476.624 148.184C479.6 148.184 484.016 150.872 489.872 156.248C495.824 161.528 498.8 166.76 498.8 171.944V199.736C498.8 204.632 499.376 208.424 500.528 211.112C501.68 213.8 503.504 216.152 ${ logo.a1.x } ${ logo.a1.y }L490.16 229.256C483.248 223.784 479.792 216.008 479.792 205.928V173.96C479.792 172.328 478.928 170.648 477.2 168.92C475.472 167.096 473.84 166.184 472.304 166.184C470.864 166.184 468.128 168.2 464.096 172.232V227.528Z`" stroke="var(--c-two)"/>
        
    
        <rect class="handle" width="14" height="14"
            style="--hover-anchor-color: white; --hover-anchor-stroke-width: 0.4"
            :x="logo.a1.x - 7" :y="logo.a1.y - 7"
            :transform="`rotate(45 ${logo.a1.x} ${logo.a1.y})`"
            stroke-opacity="1"
            @mousedown.prevent="(e)=>appState.setActiveAnchor(e,'logo', 'a1')"
            stroke-width="1"
            stroke="var(--c-three)"
            id="a1"/>
    </g>
</template>

<style lang="scss">
    .logo.selected {
        outline: 0.5px solid rgba(white, 0.2);
    }
</style>

<script setup>
    import { useAppState } from '@/stores/appState'
    import { useBaseLayers } from '@/stores/baseLayers'

    const appState = useAppState()
    const layers = useBaseLayers()

    const logo = computed( () => layers.logo )

    let clickCount = 0
    let clickTimer = null
    const delay = 250

    function handleClick(e) {
        e.preventDefault()
        clickCount++
        if (clickCount === 1) {

            clickTimer = setTimeout(() => {
                clickCount = 0
            }, delay)
            
        } else if (clickCount === 2) {
            clearTimeout(clickTimer)
            clickCount = 0
            layers.logo.selected = true
        }
    }
 </script>